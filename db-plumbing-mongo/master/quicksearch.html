<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Modules Classes Client IndexMap Store × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Classes Classes Client IndexMap Store × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store DB Plumbing (Map)Mongo database wrapper compatible with db-plumbing-map and db-plumbing-rest. Tl;DRlet store = new Client(&quot;mongodb://mongo1.net:27017/test&quot;).getStore(&quot;mycollection&quot;); store.update({ uid: 1, a: &quot;hello&quot;, b: &quot;sailor&quot;}); value=store.find(1);and value should be {uid:1, a:&quot;hello&quot;, b:&quot;sailor&quot;} The store supports remove, find by criteria, and remove by criteria operations. It also supports a bulked update operation based on the typed-patch library. This implementation should be interoperable with db-plumbing-map or db-plumbing-rest. For the latest API documentation see The Software Plumbers Site × Search results Close "},"module-db-plumbing-mongo.html":{"id":"module-db-plumbing-mongo.html","title":"Module: db-plumbing-mongo","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Module: db-plumbing-mongo Classes Client IndexMap Store × Search results Close "},"module-db-plumbing-mongo-Client.html":{"id":"module-db-plumbing-mongo-Client.html","title":"Class: Client","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Class: Client module:db-plumbing-mongo~ Client Encapsulates a mongodb database connection. new Client(url) Constuctor Parameters: Name Type Description url String URL for the mongodb database (including port and db name) Methods getStore(collection, type, indexes, options) Get a store representing the given collection that returns objects of the given type. Parameters: Name Type Description collection String mongodb collection name type function constructor for contained objects (defaults to Object) indexes IndexMap indexes (defaults to an empty IndexMap) options Overide default options.z × Search results Close "},"module-db-plumbing-mongo-IndexMap.html":{"id":"module-db-plumbing-mongo-IndexMap.html","title":"Class: IndexMap","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Class: IndexMap module:db-plumbing-mongo~ IndexMap Metadata about indexes. The generic store interface supports a findAll(index, value) operation that returns a dataset dependent on index and value. Index is, by convention, an named function (value, item) =&gt; boolean and the result of store.findAll(index,value) should be equal to store.all().filter(item =&gt; index(value, item)). An IndexMap maps the named fuction above to a different function which instead takes a value and outputs an appropriate mongodb query. The implementations of findAll and removeAll use this mongodb query to identify records, instead of performing a linear search. Currently only simple single-field indexes are supported by IndexMap. The intention is to support compound indexes also. new IndexMap() Methods addSimpleField(index, name) Tell the Mongo client about a simple index. Parameters: Name Type Description index function a named function (value,item)=&gt;boolean that filters items in a store name String the name of a field in mongodb for which item.field == value is equivalent to index Returns: this Indexmap (for fuent construction) toMongoCriteria(index) Convert an index and value to mongodb criteria Parameters: Name Type Description index function an index filter previously added to this map Returns: a monogodb query that will filter items identically to the supplied filter function × Search results Close "},"module-db-plumbing-mongo-Store.html":{"id":"module-db-plumbing-mongo-Store.html","title":"Class: Store","body":" db-plumbing-mongo Modules db-plumbing-mongo Classes db-plumbing-mongo~Clientdb-plumbing-mongo~IndexMapdb-plumbing-mongo~Store Class: Store module:db-plumbing-mongo~ Store MongoDB document store. Wraps the mongo interface in a simple but powerful interface. As well as the standard CRUD ops, a Store supports a bulk operation that takes a typed-patch Map operation. This can be used to efficiently express a range of complex update operations, and can be used to sync one store with data held in another store. new Store(collection, type, indexes) Constructor. Create a store that records objects of the given type in the supplied mongodb collection. Parameters: Name Type Description collection A mongodb collection or a promise thereof type function a constructor (perhaps a base class constructor) for elements in this store. indexes IndexMap an IndexMap object that tells mongo how to handle searches on non-ids. Members all Get all objects in the store Methods _bulkInsert() Internal function that inserts each item in the supplied array into the collection _bulkRemove() Internal function that removes documents with the supplied ids from the collection _updateFromDiff() Internal function that updates an individual record using a typed-patch Mrg operation bulk(patch) Execute multiple update operations on the store Parameters: Name Type Description patch Patch.Operation Information to update in patch format. See: Typed Patch find(_id) Find an object by its unique key Parameters: Name Type Description _id Unique object identifier Returns: A promise that either resolves with the object stored for the given key, or rejects with a DoesNotExist error. findAll(index) Find objects by index Index is, by convention, an named function (value, item) =&gt; boolean and the result of store.findAll(index,value) should be equivalent to store.all().filter(item =&gt; index(value, item)). However, other implementations of store may optimize this algorithm to use a better algorithm than a simple linear search. The distinct 'findAll' method allows for that. Parameters: Name Type Description index function A function that takes a value and a stored object and returns true or false Returns: A promise of an array containing all elements for which the function returns true for the given value remove(key) Remove an object from the store. Parameters: Name Type Description key unique identifier of object to remove. Returns: a promise that resolves to true if the object is removed, false otherwise. removeAll(index, a) Remove multiple objects from the store Parameters: Name Type Description index function a function that takes a value and an object from the store and returns true or false a value that determines which objects are removed. update(object) Update or add an object in the store. Parameters: Name Type Description object to add or update. Returns: a resolved promise. × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
